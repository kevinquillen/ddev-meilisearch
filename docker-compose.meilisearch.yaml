#ddev-generated
services:
  meilisearch:
    container_name: ddev-${DDEV_SITENAME}-meilisearch
    hostname: ${DDEV_SITENAME}-meilisearch
    image: getmeili/meilisearch:v1.6
    networks: [default, ddev_default]
    restart: "on-failure"
    environment:
      - MEILI_MASTER_KEY=${MEILI_MASTER_KEY:-ddev}
      - VIRTUAL_HOST=$DDEV_HOSTNAME
      - HTTP_EXPOSE=7699:7700
      - HTTPS_EXPOSE=7700:7700
    expose:
      - "7700"
    labels:
      com.ddev.site-name: ${DDEV_SITENAME}
      com.ddev.approot: $DDEV_APPROOT
    volumes:
      - "meili_data:/meili_data"
      - ".:/mnt/ddev_config"
  # This links the Meilisearch service to the web service defined in the main
  # docker-compose.yml, allowing applications running inside the web container to
  # access the Meilisearch service at http://meilisearch:7700
  web:
    links:
      - meilisearch:meilisearch
  meilisearch-ui:
    container_name: ddev-${DDEV_SITENAME}-meilisearch-ui
    image: riccoxie/meilisearch-ui:latest
    restart: always
    labels:
      com.ddev.site-name: ${DDEV_SITENAME}
      com.ddev.approot: $DDEV_APPROOT
    expose:
      - "24900"
    environment:
      - VIRTUAL_HOST=$DDEV_HOSTNAME
      - HTTP_EXPOSE=24899:24900
      - HTTPS_EXPOSE=24900:24900
    external_links:
      - "ddev-router:${DDEV_SITENAME}.${DDEV_TLD}"
volumes:
  meili_data:
